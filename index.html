<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
  <title>Rune Transmutation</title>
  <script type="text/javascript" src="./bower_components/C64Style/lib/Common/Utils.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/Common/Queue.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/Common/PriorityQueue.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/Common/UniquePriorityQueue.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/Color.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/Constants.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/EventType.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/Event.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/Screen.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/PixPathTypes.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/CharacterMap.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/CharacterRenderer.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/Layer.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/TextPrompt.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/TextLayer.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/GfxLayer.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/PixRenderer.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/GfxElementZIndexComparable.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/GfxElement.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/TextElement.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/PixElement.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/TextLink.js"></script>
  <script type="text/javascript" src="./bower_components/C64Style/lib/TextButton.js"></script>
  <script type="text/javascript" src="./lib/Utils.js"></script>
  <script type="text/javascript" src="./lib/RuneMaps.js"></script>
  <script type="text/javascript" src="./lib/RuneTile.js"></script>
  <script type="text/javascript" src="./lib/RuneCell.js"></script>
  <script type="text/javascript" src="./lib/BoardBackground.js"></script>
  <script type="text/javascript" src="./lib/BoardForeground.js"></script>
  <script type="text/javascript" src="./lib/GameBoard.js"></script>
  <script type="text/javascript" src="./lib/GameEngine.js"></script>
<link rel="stylesheet" type="text/css" href="style.css">
<style>
#content {
  margin : auto
}
</style>
</head>
<body>
  <div id="content">
  </div>
  <div id="mouseInfo" style="padding:20 0 0 0;">
    <table>
      <tr><td>x</td><td width="32px">&nbsp;</td><td>y</td><td width="32px">&nbsp;</td></tr>
      <tr><td>scaledX</td><td>&nbsp;</td><td>scaledY</td><td>&nbsp;</td></tr>
      <tr><td>col</td><td>&nbsp;</td><td>row</td><td>&nbsp;</td></tr>
    </table>
  </div>
  <script type="text/javascript">
  var RuneTx = RuneTx || {};
  RuneTx.GameContext = RuneTx.GameContext || {};

  var config = {
      "rows" : 28,
      "cols" : 40,
      "scaleX" : 2,
      "scaleY" : 2,
      "borderColor" : C64Style.Color.WHITE,
      "borderSize" : 3,
      "backgroundColor" : C64Style.Color.BLACK
    };

  var screen = null, textLayer = null, gfxLayer, floatLayer;
  var gameboard = null, gameEngine = null;

  function initialize(targetDiv, config) {

    // Create the C64 Screen
    screen = new C64Style.Screen(targetDiv, config);
    screen.initialize();

    screen.on("MOUSE_MOVE", function(e) {
      var elem = document.getElementById("mouseInfo");
      var boardCoords = gameEngine._getBoardCoords(e);
      elem.innerHTML = "<table>" +
      "<tr><td>x</td><td width='32px'>" + e.data.x + "</td><td>y</td><td width='32px'>" + e.data.y + "</td></tr>" +
        "<tr><td>scaledX</td><td width='32px'>" + e.data.scaledX + "</td><td>scaledY</td><td width='32px'>" + e.data.scaledY + "</td></tr>" +
        "<tr><td>col</td><td width='32px'>" + e.data.col + "</td><td>row</td><td width='32px'>" + e.data.row + "</td></tr>" +
        "<tr><td>boardX</td><td width='32px'>" + boardCoords.x + "</td><td>boardY</td><td width='32px'>" + boardCoords.y + "</td></tr>" +
        "</table>";
    });
    // screen.on("MOUSE_UP", function(e) {
    //   console.log(e.data);
    // });

    textLayer = screen.createLayer("TextLayer");
    gfxLayer = screen.createLayer("GfxLayer");
    floatLayer = screen.createLayer("GfxLayer");
    screen.render();

    var props = {
      boardOffsetX : 32,
      boardOffsetY : 32,
      levelDefinitions : [
        {
          runes : ["fehu"],
          runeColors : [C64Style.Color.WHITE],
          boardColors : [C64Style.Color.DARKGREY, C64Style.Color.LIGHTGREEN],
          rows : 3,
          cols : 3
        }
      ]
    };
    gameEngine = new RuneTx.GameEngine(screen, textLayer, gfxLayer, floatLayer, props);
    gameEngine.startRound(0);
  }

  initialize(document.getElementById("content"), config);
  </script>
</body>
</html>
